---
title: "Kickstarter Versus Indiegogo"
output: html_document
---
by Sam Tybout

samtybout@gmail.com

## An analysis of crowdfunding project success across two major platforms

Crowdfunding platforms allow users to raise money for their projects by collecting small donations from anyone on the internet. The following is an analysis (using [R](https://www.r-project.org/)) of two of the most popular such platforms, [Kickstarter](https://www.kickstarter.com) and [Indiegogo](https://www.indiegogo.com). I'll be looking at how much money projects raise on each platform, and how that relates to their categories and funding goals.

### The data

The [data on Kickstarter projects](https://www.icpsr.umich.edu/web/NADAC/studies/38050/summary) used here come from the Inter-university Consortium for Political and Social Research. The [Indiegogo project data](https://webrobots.io/indiegogo-dataset/) are from Web Robots, a company that uses bots to scrape websites.

I also made use of the International Monetary Fund's [data on exchange rates](https://www.imf.org/external/np/fin/ert/GUI/Pages/CountryDataBase.aspx) to convert currencies into US Dollars.

#### Data processing

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(readr)
library(ggplot2)
library(lubridate)
library(stringr)
library(tidyr)
library(rjags)
```


Most of the processing and analysis was done using the [tidyverse](https://www.tidyverse.org/) family of packages.

```{r load data}

# Load Indiegogo data
ig_data = read_csv("data/Indiegogo.csv", show_col_types = FALSE) %>% 
  # Select the desired variables
  select(category, close_date, currency, funds_raised_amount, funds_raised_percent, open_date, project_id, project_type, tags, title) %>% 
  # I had to use regular expressions to get the dates in a legible format
  mutate(close_date = as.Date(sub("T.*","",close_date)), 
         open_date = as.Date(sub("T.*","",open_date)),
         goal = funds_raised_amount/funds_raised_percent,
         raised_frac = funds_raised_percent,
         state = if_else(funds_raised_percent >= 1, "successful", "failed"))

# Load Kickstarter data
ks_data = read_csv("data/ICPSR_ks.csv", show_col_types = FALSE) %>% 
  # I rename the columns here so they are consistent across both platforms
  mutate(project_id = PID,
         category = CATEGORY,
         category_id = CATEGORY_ID,
         subcategory = SUBCATEGORY,
         subcategory_id = SUBCATEGORY_ID,
         open_date = mdy(LAUNCHED_DATE),
         close_date = mdy(DEADLINE_DATE),
         currency = PROJECT_CURRENCY,
         goal = GOAL_IN_ORIGINAL_CURRENCY,
         pledged = PLEDGED_IN_ORIGINAL_CURRENCY,
         # More regular expressions here so the dollar amounts can be read as numbers
         goal_usd = as.double(gsub("[$,]","",GOAL_IN_USD)),
         pledged_usd = as.double(gsub("[$,]","",PLEDGED_IN_USD)),
         backers = BACKERS_COUNT,
         state = STATE,
         raised_frac = pledged/goal,
         .keep = "none") %>% 
  filter(goal > 0)
```

```{r}
glimpse(ig_data)
glimpse(ks_data)
```

Some things to note here:

* The Indiegogo data set didn't list the funding goals for the projects. In most cases I could back-calculate this based on how much money they raised and what percent of their goal they raised; however, I couldn't do this for projects that raised absolutely no money. Those projects had to be excluded from my analysis.
* There are 30,000 projects in the Indiegogo data and a whopping 500,000 projects in the Kickstarter data. I'm not too worried about statistical power here.

```{r currency}
# Load data on exchange rates
usd_exchange = read_csv("data/Exchange_Rate_Report_IMF.csv", show_col_types = FALSE) %>% 
  # There aren't data for every day, so I calculated monthly averages
  mutate(month = floor_date(dmy(Date), "month"), .keep = "unused") %>% 
  group_by(month) %>% 
  summarise(across(.cols = everything(), ~ mean(.x, na.rm = TRUE)))

# For some reason the IMF didn't have exchange rates for Hong Kong Dollars. Maybe this is because they track exchange rates by nation, and Hong Kong isn't a country?

# This basically creates a lookup table for the USD exchange rate of each currency for each month
currency_names = str_extract(str_extract(colnames(usd_exchange), "\\(.*\\)"), "[A-Z]{3}")
i_currency = match(ig_data$currency, currency_names)
# And this uses that table to find the appropriate exchange rate for each project
i_month = match(floor_date(ig_data$open_date, unit = "month"), usd_exchange$month)
rates = as.double(data.frame(usd_exchange)[cbind(i_month, i_currency)])

# The Kickstarter data already had USD amounts, so only the Indiegogo data had to be converted
ig_data = ig_data %>% 
  mutate(pledged_usd = rates*funds_raised_amount,
         goal_usd = rates*goal)
```

Every project on these platforms has a category, like "Comics" or "Technology," and I wanted to compare the relative success of projects in these categories on the two platforms. However, Kickstarter and Indiegogo don't categorize their projects the same way, so I had to assign somewhat broader categories to each project so they could be compared.

Some categories on one platform didn't have a reasonable analogue on the other platform. This mostly happened with Indiegogo; they permit a wider array of projects, like community spaces and activism, which Kickstarter doesn't support. These projects were excluded from category comparisons.

I noticed that most categories in the Indiegogo data had exactly 840 projects; Web Robots probably used a blocked sampling scheme. This distorts the relative frequency of the categories, but I don't think it meaningfully affects the results of my analysis.

```{r generalization}
# Load the general category lookup table I created
gen_lookup = read_csv("general categories.csv", show_col_types = FALSE)

# Assign a broader category to each project
ig_data = ig_data %>%
  mutate(category_broad = slice(gen_lookup, match(category, gen_lookup$Specific))$General)

ks_data = ks_data %>% 
  mutate(category_broad = slice(gen_lookup, match(category, gen_lookup$Specific))$General)
```

### Exploration

```{r category analysis}
# I got these colors using a hexadecimal color picking tool on screenshots of the website logos
platform_colors = c(Kickstarter = "#04cc7b", Indiegogo = "#e41474")

# Summarize funding by category
ks_cat_summary = ks_data %>% 
  group_by(category_broad) %>% 
  summarize(success_rate = mean(state == "successful"),
            mean_funding_rate = mean(raised_frac, na.rm = T),
            median_funding_rate = median(raised_frac, na.rm = T),
            median_goal = median(goal_usd, na.rm = T),
            median_raised = median(pledged_usd, na.rm = T),
            count  = n()) %>% 
  mutate(platform = "Kickstarter")

ig_cat_summary = ig_data %>% 
  group_by(category_broad) %>% 
  summarize(success_rate = mean(state == "successful"),
            mean_funding_rate = mean(funds_raised_percent, na.rm = T),
            median_funding_rate = median(funds_raised_percent, na.rm = T),
            median_goal = median(goal_usd, na.rm = T),
            median_raised = median(pledged_usd, na.rm = T),
            count  = n()) %>% 
  mutate(platform = "Indiegogo")

cat_summary = union(ks_cat_summary %>% mutate(platform = "Kickstarter"),
                    ig_cat_summary %>% mutate(platform = "Indiegogo")) %>% 
  filter(!(category_broad %in% c("Kickstarter Only", "Indiegogo Only")))


ggplot(cat_summary, aes(x = category_broad)) +
  geom_col(aes(y = median_goal, color = platform), fill = NA, position = "dodge2") +
  geom_col(aes(y = median_funding_rate * median_goal, fill = platform), alpha = 0.5, position = "dodge2") +
  scale_fill_manual(values = platform_colors) + scale_color_manual(values = platform_colors) +
  scale_y_continuous(labels = scales::label_dollar()) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1.1, hjust = 1.1)) +
  xlab("Category") + ylab("Goal (USD)") + 
  ggtitle("Median Project Goal And Funding Rate By Category")
```

This is a breakdown of project success by category. The bar outlines show the median funding goal for each category, and the fill represents the median percent funding for each category (for example, if the bar is all the way full, then the median project in that category met its funding goal). A few observations:

* Most projects do not meet their funding goal. This is especially true for projects with large goals.
* Smaller projects appear to fare better on Kickstarter, while larger projects raise more money on Indiegogo.
* Indiegogo projects are generally more ambitious; this is probably due to a difference in funding rules, which I'll get into shortly.

This tells us something about the average crowdfunding project, but we should look at the spread of values, too:

```{r funding vs goal}
as_dollar_str = function(n){
  # This turns a number into a string representing dollar amount more legibly
  return(paste0("$",format(n, scientific = FALSE, big.mark = ",", trim = TRUE)))
}

assign_bin = function(dollars){
  # This function assigns a "bin" to a dollar amount based on how many digits it has
  return(paste0(
    as_dollar_str(10^floor(log10(dollars))),
    "-",
    as_dollar_str(10^(floor(log10(dollars))+1)-1)
  ))
}


funding = bind_rows(
  ks_data %>% 
    select(raised_frac, goal_usd, pledged_usd) %>% 
    mutate(platform = "Kickstarter"),
  ig_data %>% 
    select(raised_frac, goal_usd, pledged_usd) %>% 
    mutate(platform = "Indiegogo")
) %>% filter(goal_usd > 0,
         !is.infinite(goal_usd)) %>% 
  mutate(goal_bin = factor(assign_bin(goal_usd),
                           levels = assign_bin(10^(1:6))), 
         met_goal = as.integer(raised_frac >= 1),
         is_ks = as.integer(platform == "Kickstarter"))
  

# I excluded projects with goals below $100 here because they only exist on Kickstarter
ggplot(funding %>% filter(raised_frac < 5, goal_usd >= 1e2, goal_usd < 1e7), 
       aes(x = goal_bin, y = raised_frac, fill = platform, color = platform)) +
  geom_violin(scale = "width", na.rm = TRUE, position = "dodge", bw = 0.05) +
  scale_color_manual(values = platform_colors) +
  scale_fill_manual(values = platform_colors) +
  scale_y_continuous(labels = scales::percent) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1.1, hjust = 1.1)) +
  xlab("Goal Range (USD)") + ylab("Percent of Goal Raised") + 
  ggtitle("Percent Funding versus Goal")
```


This violin plot shows the money that projects raised as a percent of their stated goal. The width of each shape is proportional to how many projects raised that percent of their goal.

We can see a few things here:

* Like the previous figure, this shows that most projects don't meet their funding goal. Here we also see that projects with higher goals hit them less often.
* The bulges at %100 show that many projects hit their goal exactly or go just past it. This pattern is more pronounced on Kickstarter, probably due to Kickstarter's all-or-nothing funding rule. On Kickstarter, if a project fails to meet its goal, the backers get their money back and the project receives _nothing_, so there's a strong incentive for a project to push towards its goal if it's close. Indiegogo has no such rule; projects keep whatever they raise.


### Modeling

I wanted to create a model to predict how much money a project could expect to raise as a function of its goal. The challenge here was, as shown by the odd shapes in the violin plot, the funding rates of these projects don't follow any ordinary statistical distribution. I decided to build a two-part model. The first part estimates the chances of a project meeting its goal, based on the size of its goal, and the second part estimates how much money a project raises conditioned on whether it met its goal.

#### Chances of meeting the goal

I modeled the probability of a project hitting its goal using a basic logistic regression:

```{r logistic regression}
# The variable "is_ks" is a binary variable indicating a project's platform: 1 for Kickstarter, 0 for Indiegogo
logitmodel = glm(formula = met_goal ~ log10(goal_usd)*is_ks + log10(goal_usd) + is_ks, 
                  family = "binomial",
                  data = funding)

summary(logitmodel)

# I save the model coefficients here for use in the full model later
p_met_coeffs_ig = logitmodel$coefficients[1:2]
p_met_coeffs_ks = p_met_coeffs_ig + logitmodel$coefficients[3:4]
```

```{r plotting logistic regression}

funding_fit = funding %>% 
  mutate(p_goal_fitted = fitted(logitmodel))

ggplot(data = funding_fit %>%
         # I took a sample of the data for this plot so individual points would be more visible
         # The sample is weighted in favor of Indiegogo to compensate for the smaller data set
         slice_sample(n = 5000, weight_by = 10^(1-is_ks)), 
       aes(x = goal_usd)) +
  geom_point(aes(y = met_goal, color = platform), alpha = 0.1) +
  geom_line(aes(y = p_goal_fitted, color = platform)) +
  scale_x_log10(labels = scales::label_dollar(), limits = c(1e2, 1e7)) +
  scale_color_manual(values = platform_colors) +
  facet_wrap(vars(platform)) +
  xlab("Goal (USD)") + ylab("Probability of hitting goal") + 
  ggtitle("Logistic regression of funding probability")

```